<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Umbra â€” Santuario de lo EtÃ©reo</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Nunito:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Josefin+Sans:wght@100;300;400&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --black:#04010c;
  --deep:#0b0618;
  --void:#130a22;
  --purple:#7c2fa0;
  --violet:#b76ef7;
  --lavender:#cc94ff;
  --lilac:#e2c4ff;
  --silver:#cac6d8;
  --moonlight:#eee8f8;
  --white:#f9f5ff;
  --glow:rgba(183,110,247,.45);
}
html{scroll-behavior:smooth}
body{
  background:var(--black);
  color:var(--moonlight);
  font-family:'Nunito',sans-serif;
  font-weight:400;
  overflow-x:hidden;
  cursor:none;
}

/* â”€â”€ CURSOR SIMPLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#cur{
  width:9px;height:9px;border-radius:50%;
  background:var(--lavender);
  position:fixed;top:0;left:0;pointer-events:none;z-index:9999;
  mix-blend-mode:screen;
  transform:translate(-50%,-50%);
  box-shadow:0 0 10px var(--violet),0 0 20px var(--glow);
  transition:transform .08s ease;
}
body:has(a:hover) #cur,
body:has(button:hover) #cur{
  transform:translate(-50%,-50%) scale(2);
  background:rgba(183,110,247,.6);
}

/* â”€â”€ STARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#stars{position:fixed;inset:0;z-index:0;pointer-events:none}

/* â”€â”€ NOISE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::after{
  content:'';position:fixed;inset:0;z-index:1;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");
  opacity:.32;
}

/* â”€â”€ NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
nav{
  position:fixed;top:0;left:0;right:0;z-index:200;
  display:flex;align-items:center;justify-content:space-between;
  padding:1.4rem 4rem;
  background:linear-gradient(to bottom,rgba(4,1,12,.96),transparent);
  backdrop-filter:blur(4px);
}
.logo{
  font-family:'Cinzel Decorative',serif;font-size:1.25rem;
  letter-spacing:.18em;text-decoration:none;
  background:linear-gradient(120deg,var(--moonlight),var(--violet),var(--silver));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.nav-links{display:flex;gap:2.4rem;list-style:none}
.nav-links a{
  font-family:'Josefin Sans',sans-serif;font-size:.68rem;
  letter-spacing:.28em;text-transform:uppercase;
  color:var(--silver);text-decoration:none;opacity:.65;
  transition:opacity .3s,color .3s;
}
.nav-links a:hover{opacity:1;color:var(--lavender)}
.burger{display:none;flex-direction:column;gap:5px;cursor:pointer;z-index:300;background:none;border:none;padding:4px}
.burger span{display:block;width:22px;height:1px;background:var(--silver);transition:all .35s}
.burger.open span:nth-child(1){transform:translateY(6px) rotate(45deg)}
.burger.open span:nth-child(2){opacity:0}
.burger.open span:nth-child(3){transform:translateY(-6px) rotate(-45deg)}

/* â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#hero{
  position:relative;z-index:2;
  min-height:100vh;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  text-align:center;padding:7rem 2rem 5rem;overflow:hidden;
}
.orb{position:absolute;border-radius:50%;filter:blur(90px);pointer-events:none}
.o1{width:520px;height:520px;top:-120px;left:-120px;background:radial-gradient(circle,rgba(124,47,160,.52),transparent 70%);animation:drift 14s ease-in-out infinite alternate}
.o2{width:420px;height:420px;bottom:-100px;right:-100px;background:radial-gradient(circle,rgba(183,110,247,.38),transparent 70%);animation:drift 11s ease-in-out infinite alternate-reverse}
.o3{width:260px;height:260px;top:38%;left:50%;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(210,195,220,.13),transparent 70%);animation:drift 9s ease-in-out infinite alternate}
@keyframes drift{from{transform:translate(0,0) scale(1)}to{transform:translate(35px,20px) scale(1.1)}}
.o3{animation:drift3 9s ease-in-out infinite alternate}
@keyframes drift3{from{transform:translate(-50%,-50%) scale(1)}to{transform:translate(calc(-50% + 20px),calc(-50% + 15px)) scale(1.1)}}

.hero-eyebrow{
  font-family:'Josefin Sans',sans-serif;font-size:.62rem;
  letter-spacing:.45em;text-transform:uppercase;color:var(--violet);
  margin-bottom:1.8rem;opacity:0;animation:riseUp 1s .3s ease forwards;
}
h1{
  font-family:'Cinzel Decorative',serif;
  font-size:clamp(3.2rem,10vw,8rem);line-height:1;
  background:linear-gradient(140deg,var(--white),var(--lavender) 45%,var(--silver));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  filter:drop-shadow(0 0 50px rgba(183,110,247,.55));
  opacity:0;animation:riseUp 1.1s .6s ease forwards;
}
.hero-sub{
  margin-top:1.6rem;font-size:clamp(1rem,2vw,1.3rem);
  font-weight:400;font-style:italic;color:var(--silver);
  max-width:580px;line-height:1.85;
  opacity:0;animation:riseUp 1s .9s ease forwards;
}
.btn-primary{
  margin-top:3rem;display:inline-block;
  padding:.95rem 3rem;border:1px solid rgba(183,110,247,.5);
  color:var(--lavender);font-family:'Josefin Sans',sans-serif;
  font-size:.68rem;letter-spacing:.3em;text-transform:uppercase;
  text-decoration:none;position:relative;overflow:hidden;
  transition:color .4s,border-color .4s;
  opacity:0;animation:riseUp 1s 1.2s ease forwards;
}
.btn-primary::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,var(--purple),var(--violet));
  transform:translateX(-101%);transition:transform .45s cubic-bezier(.23,1,.32,1);z-index:-1;
}
.btn-primary:hover::before{transform:translateX(0)}
.btn-primary:hover{color:var(--white);border-color:transparent}

.hero-moon{position:absolute;top:7%;right:7%;opacity:.25;animation:moonPulse 9s ease-in-out infinite}
@keyframes moonPulse{0%,100%{opacity:.2;transform:scale(1)}50%{opacity:.38;transform:scale(1.05)}}

.scroll-cue{
  position:absolute;bottom:2.5rem;left:50%;transform:translateX(-50%);
  display:flex;flex-direction:column;align-items:center;gap:8px;
  opacity:0;animation:riseUp 1s 1.6s ease forwards;
}
.scroll-cue span{
  font-family:'Josefin Sans',sans-serif;font-size:.52rem;
  letter-spacing:.32em;text-transform:uppercase;color:var(--silver);opacity:.45;
}
.scroll-line{
  width:1px;height:46px;
  background:linear-gradient(to bottom,var(--violet),transparent);
  animation:scrollAnim 2.2s ease-in-out infinite;
}
@keyframes scrollAnim{
  0%{transform:scaleY(0);transform-origin:top;opacity:1}
  49%{transform:scaleY(1);transform-origin:top;opacity:1}
  50%{transform-origin:bottom}
  100%{transform:scaleY(0);transform-origin:bottom;opacity:0}
}
@keyframes riseUp{from{opacity:0;transform:translateY(26px)}to{opacity:1;transform:translateY(0)}}

/* â”€â”€ GLOBALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
section{position:relative;z-index:2}
.inner{max-width:1200px;margin:0 auto;padding:0 2.5rem}
.s-label{
  font-family:'Josefin Sans',sans-serif;font-size:.58rem;
  letter-spacing:.42em;text-transform:uppercase;color:var(--violet);
  display:inline-flex;align-items:center;gap:1rem;margin-bottom:1rem;
}
.s-label::before{content:'';display:block;width:36px;height:1px;background:var(--violet)}
h2{
  font-family:'Cinzel Decorative',serif;
  font-size:clamp(1.7rem,4vw,2.9rem);font-weight:400;
  background:linear-gradient(135deg,var(--white),var(--lavender));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  line-height:1.2;
}
.divider{
  width:100%;height:1px;
  background:linear-gradient(to right,transparent,rgba(124,47,160,.65),transparent);
  position:relative;z-index:2;
}
.reveal{opacity:0;transform:translateY(36px);transition:opacity .8s ease,transform .8s ease}
.reveal.vis{opacity:1;transform:translateY(0)}

/* â”€â”€ MANIFIESTO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#manifiesto{
  padding:8rem 0;
  background:linear-gradient(to bottom,var(--black),var(--deep));
}
.manifesto-grid{display:grid;grid-template-columns:1fr 1fr;gap:5rem;align-items:center}
.manifesto-text p{
  font-size:clamp(.98rem,1.4vw,1.15rem);
  line-height:2;color:var(--silver);margin-bottom:1.6rem;font-weight:400;
}
.manifesto-text em{color:var(--lilac);font-style:italic}
.sigil-wrap{display:flex;align-items:center;justify-content:center;animation:spinSlow 80s linear infinite}
@keyframes spinSlow{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

/* â”€â”€ CRIATURAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#criaturas{padding:8rem 0;background:var(--deep)}
.creatures-head{text-align:center;margin-bottom:5rem}
.creatures-head .s-label{justify-content:center;display:flex}
.creatures-head .s-label::before{display:none}
.creatures-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.6rem}

.ccard{
  position:relative;aspect-ratio:3/4;
  border:1px solid rgba(183,110,247,.18);
  overflow:hidden;cursor:pointer;background:var(--void);
  transition:border-color .4s,transform .4s;
}
.ccard:hover{border-color:rgba(183,110,247,.78);transform:translateY(-8px)}
.ccard::before{
  content:'';position:absolute;inset:0;z-index:1;
  background:linear-gradient(to top,rgba(4,1,12,.97),rgba(4,1,12,.2) 55%,transparent);
}
.ccard-art{width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:1.5rem}
.ccard-info{
  position:absolute;bottom:0;left:0;right:0;z-index:2;
  padding:1.6rem;transform:translateY(16px);transition:transform .4s;
}
.ccard:hover .ccard-info{transform:translateY(0)}
.ccard-name{font-family:'Cinzel Decorative',serif;font-size:1.05rem;color:var(--white);margin-bottom:.5rem}
.ccard-desc{
  font-size:.92rem;font-style:italic;color:var(--silver);
  line-height:1.6;opacity:0;transform:translateY(8px);
  transition:opacity .4s .1s,transform .4s .1s;
}
.ccard:hover .ccard-desc{opacity:1;transform:translateY(0)}
.glow-accent{
  position:absolute;bottom:-40px;left:50%;transform:translateX(-50%);
  width:200px;height:80px;border-radius:50%;filter:blur(30px);
  opacity:0;transition:opacity .4s;z-index:0;
}
.ccard:hover .glow-accent{opacity:1}

/* â”€â”€ LUNA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#luna{
  padding:8rem 0;
  background:linear-gradient(to bottom,var(--deep),var(--void));
}
.luna-header{text-align:center;margin-bottom:4rem}
.luna-header .s-label{justify-content:center;display:flex}
.luna-header .s-label::before{display:none}
.luna-intro{
  font-size:1.05rem;font-style:italic;color:var(--silver);
  max-width:520px;margin:1rem auto 0;line-height:1.85;
}
.luna-grid{
  display:grid;grid-template-columns:1fr 1fr;
  gap:3rem;align-items:start;
}

/* Calendar */
.moon-calendar{
  background:rgba(255,255,255,.025);
  border:1px solid rgba(183,110,247,.2);
  padding:2rem;
}
.cal-header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:1.5rem;
}
.cal-title{
  font-family:'Cinzel Decorative',serif;font-size:1rem;
  color:var(--lavender);
}
.cal-nav button{
  background:none;border:1px solid rgba(183,110,247,.3);
  color:var(--silver);padding:.3rem .7rem;cursor:pointer;
  font-size:.9rem;transition:border-color .3s,color .3s;
  font-family:'Nunito',sans-serif;
}
.cal-nav button:hover{border-color:var(--violet);color:var(--lavender)}
.cal-days-header{
  display:grid;grid-template-columns:repeat(7,1fr);
  gap:2px;margin-bottom:.5rem;
}
.cal-days-header span{
  font-family:'Josefin Sans',sans-serif;font-size:.55rem;
  letter-spacing:.2em;text-transform:uppercase;
  color:rgba(202,198,216,.4);text-align:center;padding:.4rem 0;
}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px}
.cal-day{
  aspect-ratio:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;gap:2px;
  cursor:pointer;border-radius:4px;
  transition:background .2s;
  position:relative;
}
.cal-day:hover{background:rgba(183,110,247,.12)}
.cal-day.today{background:rgba(183,110,247,.2);border:1px solid rgba(183,110,247,.4)}
.cal-day.other-month{opacity:.25}
.cal-day-num{
  font-size:.7rem;color:var(--silver);
  font-family:'Josefin Sans',sans-serif;line-height:1;
}
.cal-day.today .cal-day-num{color:var(--lavender);font-weight:600}
.cal-moon-icon{font-size:.85rem;line-height:1}

/* Current phase panel */
.current-phase{
  background:rgba(255,255,255,.025);
  border:1px solid rgba(183,110,247,.2);
  padding:2.5rem;
  display:flex;flex-direction:column;align-items:center;
  text-align:center;gap:1.5rem;
  position:sticky;top:7rem;
}
.current-phase::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(to right,transparent,var(--violet),transparent);
}
.cp-label{
  font-family:'Josefin Sans',sans-serif;font-size:.58rem;
  letter-spacing:.38em;text-transform:uppercase;color:var(--violet);opacity:.8;
}
.cp-moon-svg{
  filter:drop-shadow(0 0 20px rgba(183,110,247,.6));
  animation:moonPulse 6s ease-in-out infinite;
}
.cp-phase-name{
  font-family:'Cinzel Decorative',serif;font-size:1.3rem;
  color:var(--white);
}
.cp-date{
  font-size:.85rem;color:var(--silver);opacity:.7;
  font-family:'Josefin Sans',sans-serif;letter-spacing:.15em;
}
.cp-desc{
  font-size:.98rem;color:var(--silver);
  line-height:1.8;font-style:italic;
  border-top:1px solid rgba(183,110,247,.15);
  padding-top:1.2rem;
}
.cp-age{
  font-family:'Cinzel Decorative',serif;
  font-size:2.5rem;color:var(--lavender);
  filter:drop-shadow(0 0 15px rgba(183,110,247,.5));
}
.cp-age-label{
  font-family:'Josefin Sans',sans-serif;font-size:.55rem;
  letter-spacing:.28em;text-transform:uppercase;color:var(--silver);opacity:.5;
  margin-top:-.8rem;
}

/* phase pills legend */
.phase-legend{
  margin-top:1.5rem;display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;
}
.phase-pill{
  display:flex;align-items:center;gap:.4rem;
  padding:.25rem .7rem;background:rgba(255,255,255,.03);
  border:1px solid rgba(183,110,247,.15);
  font-size:.68rem;color:var(--silver);
  font-family:'Josefin Sans',sans-serif;letter-spacing:.1em;
}
.phase-pill .pm{font-size:.9rem}

/* â”€â”€ BLOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#blog{padding:8rem 0;background:var(--void)}
.blog-header{
  display:flex;justify-content:space-between;align-items:flex-end;
  margin-bottom:3.5rem;flex-wrap:wrap;gap:1rem;
}
.ver-mas{
  font-family:'Josefin Sans',sans-serif;font-size:.62rem;
  letter-spacing:.28em;text-transform:uppercase;color:var(--violet);
  text-decoration:none;border-bottom:1px solid rgba(183,110,247,.35);
  padding-bottom:2px;transition:color .3s,border-color .3s;
}
.ver-mas:hover{color:var(--lavender);border-color:var(--lavender)}
.blog-grid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:1.5rem}
.bcard{
  background:rgba(255,255,255,.02);
  border:1px solid rgba(183,110,247,.1);
  padding:2rem;position:relative;overflow:hidden;cursor:pointer;
  transition:background .4s,border-color .4s;
}
.bcard::after{
  content:'';position:absolute;bottom:0;left:0;right:0;
  height:2px;background:linear-gradient(to right,var(--purple),var(--violet));
  transform:scaleX(0);transition:transform .45s;transform-origin:left;
}
.bcard:hover{background:rgba(183,110,247,.04);border-color:rgba(183,110,247,.38)}
.bcard:hover::after{transform:scaleX(1)}
.bcard .tag{
  font-family:'Josefin Sans',sans-serif;font-size:.53rem;
  letter-spacing:.35em;text-transform:uppercase;color:var(--violet);
  display:inline-block;margin-bottom:1rem;
}
.bcard h3{
  font-family:'Cinzel Decorative',serif;font-size:.95rem;
  font-weight:400;color:var(--white);margin-bottom:.8rem;line-height:1.45;
}
.bcard.featured h3{font-size:1.35rem}
.bcard p{font-size:.97rem;color:var(--silver);line-height:1.78;font-weight:400}
.bcard .meta{
  margin-top:1.5rem;font-family:'Josefin Sans',sans-serif;
  font-size:.52rem;letter-spacing:.2em;color:rgba(202,198,216,.32);
}

/* â”€â”€ NEWSLETTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#nl{
  padding:7rem 0;
  background:linear-gradient(to bottom,var(--void),var(--black));
  text-align:center;
}
#nl .s-label{justify-content:center;display:flex}
#nl .s-label::before{display:none}
#nl p{
  font-size:1.05rem;color:var(--silver);font-style:italic;
  max-width:480px;margin:1rem auto 2.8rem;line-height:1.85;
}
.nl-form{display:flex;justify-content:center;max-width:480px;margin:0 auto}
.nl-form input{
  flex:1;background:rgba(255,255,255,.04);
  border:1px solid rgba(183,110,247,.3);border-right:none;
  padding:.92rem 1.5rem;color:var(--white);
  font-family:'Nunito',sans-serif;font-size:1rem;
  outline:none;transition:border-color .3s;
}
.nl-form input::placeholder{color:rgba(202,198,216,.3)}
.nl-form input:focus{border-color:rgba(183,110,247,.7)}
.nl-form button{
  background:linear-gradient(135deg,var(--purple),var(--violet));
  border:none;padding:.92rem 2.2rem;color:var(--white);cursor:pointer;
  font-family:'Josefin Sans',sans-serif;font-size:.62rem;
  letter-spacing:.28em;text-transform:uppercase;transition:opacity .3s;
}
.nl-form button:hover{opacity:.82}
.nl-success{
  display:none;
  font-family:'Cinzel Decorative',serif;font-size:1rem;
  color:var(--lavender);margin-top:1.5rem;
  animation:riseUp .6s ease forwards;
}

/* newsletter steps */
.nl-steps{
  max-width:480px;margin:2.5rem auto 0;
  display:flex;flex-direction:column;gap:1rem;text-align:left;
}
.nl-step{
  display:flex;align-items:flex-start;gap:1.2rem;
  padding:1rem 1.2rem;
  background:rgba(255,255,255,.025);
  border:1px solid rgba(183,110,247,.15);
  transition:border-color .3s,background .3s;
}
.nl-step:hover{border-color:rgba(183,110,247,.38);background:rgba(183,110,247,.04)}
.nl-step-num{
  font-family:'Cinzel Decorative',serif;font-size:.75rem;
  color:var(--violet);opacity:.8;flex-shrink:0;margin-top:.15rem;
}
.nl-step-text{font-size:.98rem;color:var(--silver);line-height:1.7}
.nl-note{
  max-width:480px;margin:1.2rem auto 0;
  font-size:.75rem;color:rgba(202,198,216,.35);
  font-family:'Josefin Sans',sans-serif;letter-spacing:.08em;
}

/* â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
footer{
  position:relative;z-index:2;background:var(--black);
  padding:4rem 0 2rem;text-align:center;
  border-top:1px solid rgba(183,110,247,.1);
}
.foot-logo{
  font-family:'Cinzel Decorative',serif;font-size:1.4rem;
  background:linear-gradient(135deg,var(--moonlight),var(--violet));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;display:inline-block;margin-bottom:1.6rem;
}
.foot-links{
  display:flex;justify-content:center;gap:2.5rem;
  list-style:none;margin-bottom:2.5rem;flex-wrap:wrap;
}
.foot-links a{
  font-family:'Josefin Sans',sans-serif;font-size:.6rem;
  letter-spacing:.25em;text-transform:uppercase;color:var(--silver);
  text-decoration:none;opacity:.45;transition:opacity .3s,color .3s;
}
.foot-links a:hover{opacity:1;color:var(--lavender)}
.foot-copy{
  font-size:.78rem;color:rgba(202,198,216,.22);
  font-family:'Nunito',sans-serif;letter-spacing:.08em;
}
.foot-sym{
  display:flex;justify-content:center;gap:1.5rem;
  margin-bottom:1.5rem;font-size:1.2rem;color:rgba(183,110,247,.38);
}

/* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:900px){
  nav{padding:1.2rem 1.8rem}
  .nav-links{
    position:fixed;inset:0;background:rgba(4,1,12,.97);
    flex-direction:column;align-items:center;justify-content:center;gap:2.2rem;
    transform:translateX(100%);transition:transform .45s cubic-bezier(.23,1,.32,1);
    backdrop-filter:blur(12px);z-index:250;
  }
  .nav-links.open{transform:translateX(0)}
  .nav-links a{font-size:.9rem;opacity:1}
  .burger{display:flex}
  .manifesto-grid{grid-template-columns:1fr;gap:3rem}
  .creatures-grid{grid-template-columns:repeat(2,1fr)}
  .luna-grid{grid-template-columns:1fr}
  .current-phase{position:static}
  .blog-grid{grid-template-columns:1fr}
}
@media(max-width:520px){
  .inner{padding:0 1.4rem}
  .nl-form{flex-direction:column}
  .nl-form input{border-right:1px solid rgba(183,110,247,.3);border-bottom:none}
  .foot-links{gap:1.2rem}
  #cur{display:none}
  body{cursor:auto}
}
</style>
</head>
<body>

<div id="cur"></div>
<canvas id="stars"></canvas>

<!-- NAV -->
<nav>
  <a href="#" class="logo">Umbra</a>
  <button class="burger" id="burger" aria-label="MenÃº">
    <span></span><span></span><span></span>
  </button>
  <ul class="nav-links" id="navLinks">
    <li><a href="#luna">Luna</a></li>
    <li><a href="#blog">Blog</a></li>
    <li><a href="#nl">CÃ­rculo</a></li>
  </ul>
</nav>

<!-- HERO -->
<section id="hero">
  <div class="orb o1"></div>
  <div class="orb o2"></div>
  <div class="orb o3"></div>

  <svg class="hero-moon" width="200" height="200" viewBox="0 0 200 200" fill="none">
    <circle cx="100" cy="100" r="95" stroke="rgba(210,195,220,.38)" stroke-width=".5"/>
    <circle cx="100" cy="100" r="78" stroke="rgba(183,110,247,.3)" stroke-width=".4" stroke-dasharray="3 7"/>
    <circle cx="100" cy="100" r="60" stroke="rgba(210,195,220,.22)" stroke-width=".5"/>
    <path d="M100 5 C68 5 42 48 42 100 C42 152 68 195 100 195 C88 172 81 138 81 100 C81 62 88 28 100 5Z" fill="rgba(210,195,220,.1)"/>
    <circle cx="100" cy="100" r="3.5" fill="rgba(183,110,247,.85)"/>
    <circle cx="72" cy="64" r="1.5" fill="rgba(210,195,220,.4)"/>
    <circle cx="128" cy="48" r="1" fill="rgba(210,195,220,.3)"/>
  </svg>

  <p class="hero-eyebrow">âœ¦ &nbsp; Santuario de lo EtÃ©reo &nbsp; âœ¦</p>
  <h1>Umbra</h1>
  <p class="hero-sub">Donde la magia respira entre sombras.<br/>Un espacio para las que caminan entre mundos.</p>
  <a href="#manifiesto" class="btn-primary">Adentrarse</a>

  <div class="scroll-cue">
    <span>Descender</span>
    <div class="scroll-line"></div>
  </div>
</section>

<!-- MANIFIESTO -->
<section id="manifiesto">
  <div class="inner">
    <div class="manifesto-grid">
      <div class="manifesto-text reveal">
        <span class="s-label">Umbra</span>
        <h2 style="margin-bottom:2rem">Donde la sombra<br/>tiene nombre</h2>
        <p>AquÃ­ no hay dogmas. Solo <em>presencia</em>, intuiciÃ³n y el susurro antiguo que tÃº ya conoces. Este espacio naciÃ³ de la necesidad de un lugar que no pida disculpas por su oscuridad.</p>
        <p>Exploramos el tarot, las fases lunares, los rituales, las deidades olvidadas y las criaturas que viven en el pliegue entre lo visto y lo <em>invisible</em>. Porque hay poder en lo que otros temen nombrar.</p>
        <p>Umbra es para las almas que siempre sintieron que pertenecen a otro tipo de historia. <em>La tuya.</em></p>
      </div>
      <div class="reveal" style="display:flex;align-items:center;justify-content:center">
        <div class="sigil-wrap">
          <svg width="280" height="280" viewBox="0 0 280 280" fill="none">
            <circle cx="140" cy="140" r="132" stroke="rgba(183,110,247,.13)" stroke-width="1"/>
            <circle cx="140" cy="140" r="112" stroke="rgba(210,195,220,.07)" stroke-width=".5" stroke-dasharray="3 8"/>
            <circle cx="140" cy="140" r="90" stroke="rgba(183,110,247,.22)" stroke-width=".8"/>
            <polygon points="140,20 169,108 262,108 190,162 216,250 140,196 64,250 90,162 18,108 111,108" stroke="rgba(183,110,247,.42)" stroke-width=".8" fill="none"/>
            <circle cx="140" cy="140" r="36" stroke="rgba(210,195,220,.18)" stroke-width=".7" stroke-dasharray="2 5"/>
            <circle cx="140" cy="140" r="4" fill="rgba(183,110,247,.9)"/>
            <circle cx="140" cy="20" r="2" fill="rgba(183,110,247,.45)"/>
            <circle cx="262" cy="108" r="2" fill="rgba(183,110,247,.32)"/>
            <circle cx="216" cy="250" r="2" fill="rgba(183,110,247,.32)"/>
            <circle cx="64" cy="250" r="2" fill="rgba(183,110,247,.32)"/>
            <circle cx="18" cy="108" r="2" fill="rgba(183,110,247,.32)"/>
          </svg>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- LUNA -->
<section id="luna">
  <div class="inner">
    <div class="luna-header reveal">
      <span class="s-label">Ciclos</span>
      <h2>Las Fases de la Luna</h2>
      <p class="luna-intro">La luna dicta mareas, sueÃ±os y el ritmo secreto de nuestras almas. Cada dÃ­a, una energÃ­a distinta.</p>
    </div>
    <div class="luna-grid">

      <!-- CALENDAR -->
      <div class="moon-calendar reveal">
        <div class="cal-header">
          <span class="cal-title" id="calTitle"></span>
          <div class="cal-nav">
            <button id="prevMonth">&#8249;</button>
            <button id="nextMonth">&#8250;</button>
          </div>
        </div>
        <div class="cal-days-header">
          <span>Lun</span><span>Mar</span><span>MiÃ©</span>
          <span>Jue</span><span>Vie</span><span>SÃ¡b</span><span>Dom</span>
        </div>
        <div class="cal-grid" id="calGrid"></div>
        <div class="phase-legend" id="phaseLegend"></div>
      </div>

      <!-- CURRENT PHASE -->
      <div class="current-phase reveal">
        <span class="cp-label">Fase actual</span>
        <svg class="cp-moon-svg" id="cpMoonSvg" width="120" height="120" viewBox="0 0 120 120"></svg>
        <div class="cp-phase-name" id="cpPhaseName">â€”</div>
        <div class="cp-age"><span id="cpAge">â€”</span></div>
        <div class="cp-age-label">dÃ­as desde luna nueva</div>
        <div class="cp-date" id="cpDate"></div>
        <div class="cp-desc" id="cpDesc">Cargando energÃ­a lunar...</div>
      </div>

    </div>
  </div>
</section>

<div class="divider"></div>

<!-- BLOG -->
<section id="blog">
  <div class="inner">
    <div class="blog-header">
      <div class="reveal">
        <span class="s-label">Grimorios</span>
        <h2>Del Libro de Sombras</h2>
      </div>
      <a href="blog.html" class="ver-mas reveal">Ver todos los escritos</a>
    </div>
    <div class="blog-grid">
      <div class="bcard featured reveal">
        <span class="tag">âœ¦ &nbsp; Tarot</span>
        <h3>Los Arcanos Mayores y las Heridas que No SabÃ­as que TenÃ­as</h3>
        <p>El tarot no predice el futuro. Es un espejo que te muestra exactamente aquello que te niegas a ver. Exploramos cÃ³mo cada arcano mayor corresponde a una sombra interna que pide ser reconocida.</p>
        <div class="meta">14 de Febrero, 2025 &nbsp;Â·&nbsp; 8 min de lectura</div>
      </div>
      <div class="bcard reveal" style="transition-delay:.1s">
        <span class="tag">âœ¦ &nbsp; Luna</span>
        <h3>Por QuÃ© la Luna Llena Te Desestabiliza</h3>
        <p>No es tu imaginaciÃ³n. La luna llena amplifica todo lo que normalmente reprimes. Aprende a navegar su poder en lugar de sobrevivirlo.</p>
        <div class="meta">2 de Febrero, 2025</div>
      </div>
      <div class="bcard reveal" style="transition-delay:.2s">
        <span class="tag">âœ¦ &nbsp; Deidades</span>
        <h3>HÃ©cate: La Diosa que Sostiene las Llaves del Inframundo</h3>
        <p>Diosa de la magia, los cruces de caminos y la luna. Por quÃ© su energÃ­a estÃ¡ mÃ¡s presente que nunca en estos tiempos.</p>
        <div class="meta">18 de Enero, 2025</div>
      </div>
    </div>
  </div>
</section>

<div class="divider"></div>

<!-- NEWSLETTER -->
<section id="nl">
  <div class="inner">
    <div class="reveal">
      <span class="s-label">CÃ­rculo Interno</span>
      <h2 style="margin-bottom:0">Ãšnete al Aquelarre</h2>
      <p>Un ritual, una carta de tarot con su mensaje y los secretos que no publicamos en ningÃºn otro lugar. Directo a tu correo.</p>

      <div class="nl-steps">
        <div class="nl-step">
          <span class="nl-step-num">01</span>
          <span class="nl-step-text">Haz clic en el botÃ³n de abajo. Se abrirÃ¡ una pÃ¡gina de Substack.</span>
        </div>
        <div class="nl-step">
          <span class="nl-step-num">02</span>
          <span class="nl-step-text">Introduce tu correo electrÃ³nico y confirma la suscripciÃ³n.</span>
        </div>
        <div class="nl-step">
          <span class="nl-step-num">03</span>
          <span class="nl-step-text">RecibirÃ¡s un email de confirmaciÃ³n. Dale a confirmar y listo â€” ya eres del cÃ­rculo.</span>
        </div>
        <div class="nl-step">
          <span class="nl-step-num">04</span>
          <span class="nl-step-text">Cada envÃ­o llegarÃ¡ directamente a tu bandeja de entrada. Sin app, sin pasos extra.</span>
        </div>
      </div>

      <a href="https://substack.com/@myrmaidd" target="_blank" rel="noopener noreferrer" class="btn-primary" style="opacity:1;animation:none;margin-top:2.5rem">
        âœ¦ &nbsp; Suscribirse al Aquelarre
      </a>
      <p class="nl-note">Al suscribirte aceptas recibir correos de Umbra a travÃ©s de Substack. Puedes cancelar cuando quieras.</p>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="inner">
    <div class="foot-sym"><span>â˜½</span><span>âœ¦</span><span>â˜¾</span></div>
    <div class="foot-logo">Umbra</div>
    <ul class="foot-links">
      <li><a href="index.html">Inicio</a></li>
      <li><a href="#luna">Luna</a></li>
      <li><a href="blog.html">Blog</a></li>
      <li><a href="#">Sobre mÃ­</a></li>
      <li><a href="#">Contacto</a></li>
    </ul>
    <p class="foot-copy">Â© 2025 Umbra â€” Santuario de lo EtÃ©reo &nbsp;Â·&nbsp; Hecho con magia oscura y HTML</p>
  </div>
</footer>

<script>
// â”€â”€ CURSOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur = document.getElementById('cur');
let mx=0, my=0;
document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cur.style.transform = `translate(${mx}px,${my}px) translate(-50%,-50%)`;
});

// â”€â”€ STARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function(){
  const c = document.getElementById('stars'), ctx = c.getContext('2d');
  let W, H, stars = [];
  function resize(){ W = c.width = window.innerWidth; H = c.height = window.innerHeight; }
  resize(); window.addEventListener('resize', resize);
  function mk(){ return { x:Math.random()*W, y:Math.random()*H, r:Math.random()*.9+.2, a:Math.random(), da:(Math.random()-.5)*.004, dx:(Math.random()-.5)*.04, dy:(Math.random()-.5)*.04 }; }
  for(let i=0;i<280;i++) stars.push(mk());
  (function draw(){
    ctx.clearRect(0,0,W,H);
    stars.forEach(s=>{
      s.a+=s.da; if(s.a>1||s.a<0) s.da*=-1;
      s.x+=s.dx; s.y+=s.dy;
      if(s.x<0)s.x=W; if(s.x>W)s.x=0; if(s.y<0)s.y=H; if(s.y>H)s.y=0;
      ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(210,195,220,${s.a*.7})`; ctx.fill();
    });
    stars.slice(0,60).forEach(s=>{
      ctx.beginPath(); ctx.arc(s.x,s.y,s.r*.5,0,Math.PI*2);
      ctx.fillStyle=`rgba(183,110,247,${s.a*.45})`; ctx.fill();
    });
    requestAnimationFrame(draw);
  })();
})();

// â”€â”€ NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const burger = document.getElementById('burger');
const navLinks = document.getElementById('navLinks');
burger.addEventListener('click', ()=>{ burger.classList.toggle('open'); navLinks.classList.toggle('open'); });
navLinks.querySelectorAll('a').forEach(a => a.addEventListener('click', ()=>{ burger.classList.remove('open'); navLinks.classList.remove('open'); }));

// â”€â”€ SCROLL REVEAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const obs = new IntersectionObserver(entries => {
  entries.forEach(e => { if(e.isIntersecting){ e.target.classList.add('vis'); obs.unobserve(e.target); } });
}, { threshold: .1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// â”€â”€ MOON PHASE ENGINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getMoonAge(date) {
  // Known new moon: 6 Jan 2000 18:14 UTC
  const knownNewMoon = new Date(Date.UTC(2000, 0, 6, 18, 14));
  const synodicMonth = 29.53058867; // days
  const diff = (date - knownNewMoon) / (1000 * 60 * 60 * 24);
  const age = ((diff % synodicMonth) + synodicMonth) % synodicMonth;
  return age;
}

function getPhaseInfo(age) {
  const phases = [
    { name: 'Luna Nueva',         emoji: 'ðŸŒ‘', min: 0,     max: 1.85,  desc: 'Tiempo de intenciÃ³n. El vacÃ­o tiene su propio poder â€” planta semillas en la oscuridad y observa quÃ© germina.' },
    { name: 'Creciente Inicial',  emoji: 'ðŸŒ’', min: 1.85,  max: 7.38,  desc: 'La voluntad se despierta. Empieza, actÃºa, muÃ©vete. La luna te empuja desde atrÃ¡s.' },
    { name: 'Cuarto Creciente',   emoji: 'ðŸŒ“', min: 7.38,  max: 11.08, desc: 'Toma decisiones. Supera obstÃ¡culos. La tensiÃ³n de este cuarto pide resoluciÃ³n.' },
    { name: 'Gibosa Creciente',   emoji: 'ðŸŒ”', min: 11.08, max: 14.77, desc: 'Refinamiento. Ajusta, pule, perfecciona lo que ya pusiste en marcha.' },
    { name: 'Luna Llena',         emoji: 'ðŸŒ•', min: 14.77, max: 16.61, desc: 'MÃ¡xima potencia. Todo brilla, todo se revela. Celebra, libera, siente todo con intensidad.' },
    { name: 'Gibosa Menguante',   emoji: 'ðŸŒ–', min: 16.61, max: 22.15, desc: 'Gratitud y cosecha. Comparte lo que has ganado. La energÃ­a empieza a volverse hacia adentro.' },
    { name: 'Cuarto Menguante',   emoji: 'ðŸŒ—', min: 22.15, max: 25.84, desc: 'Suelta. DÃ©jate caer. Lo que ya no sirve debe irse antes de que llegue lo nuevo.' },
    { name: 'Creciente Final',    emoji: 'ðŸŒ˜', min: 25.84, max: 29.53, desc: 'Descanso, reflexiÃ³n, rendiciÃ³n. La oscuridad se acerca â€” no con miedo, sino con conciencia.' },
  ];
  return phases.find(p => age >= p.min && age < p.max) || phases[0];
}

// Draw moon SVG for a given age (0-29.53)
function drawMoonSVG(size, age) {
  const r = size * .42;
  const cx = size / 2, cy = size / 2;
  const illuminated = age / 29.53;
  const isWaxing = age < 14.77;

  // Determine the crescent/gibbous shape
  // We use an ellipse for the terminator
  const phase = illuminated * Math.PI * 2;
  let d;

  if (age < 1 || age > 28.5) {
    // New moon â€” dark circle
    return `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" fill="none">
      <circle cx="${cx}" cy="${cy}" r="${r}" fill="rgba(4,1,12,.97)" stroke="rgba(210,195,220,.3)" stroke-width="1"/>
    </svg>`;
  } else if (age > 14.3 && age < 15.3) {
    // Full moon
    return `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" fill="none">
      <circle cx="${cx}" cy="${cy}" r="${r}" fill="rgba(226,196,255,.88)" stroke="rgba(183,110,247,.6)" stroke-width="1.5"/>
      <circle cx="${cx}" cy="${cy}" r="${r+3}" fill="none" stroke="rgba(183,110,247,.25)" stroke-width="1"/>
    </svg>`;
  }

  // For other phases, compute a path
  // The lit side: use two arcs â€” one outer circle arc, one ellipse arc for the terminator
  const termRx = r * Math.abs(Math.cos(illuminated * Math.PI * 2));
  const termSign = age < 14.77 ? -1 : 1; // which side is lit

  // Sweep flags for the arcs
  const outerSweep = 1; // outer circle always sweeps one way
  const innerSweep = age < 14.77 ? 0 : 1;
  const xSign = age < 14.77 ? 1 : -1;

  const path = `
    M ${cx} ${cy - r}
    A ${r} ${r} 0 0 ${outerSweep} ${cx} ${cy + r}
    A ${termRx.toFixed(2)} ${r} 0 0 ${innerSweep} ${cx} ${cy - r}
    Z
  `;

  // Flip horizontally for waning
  const transform = age >= 14.77 ? `transform="scale(-1,1) translate(-${size},0)"` : '';

  return `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}" fill="none">
    <circle cx="${cx}" cy="${cy}" r="${r}" fill="rgba(4,1,12,.97)" stroke="rgba(210,195,220,.2)" stroke-width=".7"/>
    <path d="${path}" fill="rgba(226,196,255,.85)" ${transform}/>
  </svg>`;
}

// Simplified moon emoji/icon for calendar cell
function moonEmoji(age) {
  if(age < 1.85)  return 'ðŸŒ‘';
  if(age < 7.38)  return 'ðŸŒ’';
  if(age < 11.08) return 'ðŸŒ“';
  if(age < 14.77) return 'ðŸŒ”';
  if(age < 16.61) return 'ðŸŒ•';
  if(age < 22.15) return 'ðŸŒ–';
  if(age < 25.84) return 'ðŸŒ—';
  return 'ðŸŒ˜';
}

// â”€â”€ CALENDAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let calYear, calMonth;
const today = new Date();

function renderCalendar(year, month) {
  calYear = year; calMonth = month;
  const title = document.getElementById('calTitle');
  const grid  = document.getElementById('calGrid');
  const monthNames = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
  title.textContent = `${monthNames[month]} ${year}`;

  // First day of month (0=Sunâ€¦6=Sat â†’ convert to Mon-first)
  const firstDay = new Date(year, month, 1).getDay(); // 0=Sun
  const startOffset = (firstDay === 0) ? 6 : firstDay - 1;
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  const daysInPrev  = new Date(year, month, 0).getDate();

  grid.innerHTML = '';

  // Prev month padding
  for(let i = startOffset - 1; i >= 0; i--) {
    const d = new Date(year, month - 1, daysInPrev - i);
    grid.appendChild(makeCell(d, true));
  }
  // Current month
  for(let d = 1; d <= daysInMonth; d++) {
    const date = new Date(year, month, d);
    const isToday = date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();
    grid.appendChild(makeCell(date, false, isToday));
  }
  // Next month padding
  const totalCells = startOffset + daysInMonth;
  const remaining = (7 - (totalCells % 7)) % 7;
  for(let d = 1; d <= remaining; d++) {
    const date = new Date(year, month + 1, d);
    grid.appendChild(makeCell(date, true));
  }
}

function makeCell(date, otherMonth, isToday) {
  const cell = document.createElement('div');
  cell.className = 'cal-day' + (otherMonth ? ' other-month' : '') + (isToday ? ' today' : '');
  const age = getMoonAge(date);
  const emoji = moonEmoji(age);
  cell.innerHTML = `<span class="cal-moon-icon">${emoji}</span><span class="cal-day-num">${date.getDate()}</span>`;
  cell.title = `${date.getDate()} â€” ${getPhaseInfo(age).name}`;
  return cell;
}

document.getElementById('prevMonth').addEventListener('click', () => {
  let m = calMonth - 1, y = calYear;
  if(m < 0){ m = 11; y--; }
  renderCalendar(y, m);
});
document.getElementById('nextMonth').addEventListener('click', () => {
  let m = calMonth + 1, y = calYear;
  if(m > 11){ m = 0; y++; }
  renderCalendar(y, m);
});

// â”€â”€ CURRENT PHASE PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderCurrentPhase() {
  const age = getMoonAge(today);
  const info = getPhaseInfo(age);

  document.getElementById('cpPhaseName').textContent = info.name;
  document.getElementById('cpAge').textContent = Math.floor(age);
  document.getElementById('cpDesc').textContent = info.desc;

  const dateStr = today.toLocaleDateString('es-ES', { weekday:'long', day:'numeric', month:'long', year:'numeric' });
  document.getElementById('cpDate').textContent = dateStr;

  const svgWrap = document.getElementById('cpMoonSvg');
  svgWrap.outerHTML = drawMoonSVG(120, age).replace('<svg', '<svg id="cpMoonSvg" class="cp-moon-svg"');
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderCalendar(today.getFullYear(), today.getMonth());
renderCurrentPhase();


</script>
</body>
</html>
